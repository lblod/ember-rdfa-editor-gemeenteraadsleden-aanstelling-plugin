{{#if edit}}
  <div class="u-spacer--round--tiny">
    <div class="grid">
      <div class="col--8-12">
        <h2 class="h5">Beheer de oude mandaten van  {{currentVerkozene.persoon.gebruikteVoornaam}}  {{currentVerkozene.persoon.achternaam}}</h2>
      </div>
      <div class="col--4-12 u-align--right">
        {{#wu-button class="button--alt button--small button--narrow" onClick=(action 'addOldMandaat' mandaat)}}<i class="vi vi-plus"></i> Voeg afgelopen mandaat toe{{/wu-button}}
      </div>
    </div>
  </div>
  <table class="data-table data-table--lined data-table--zebra">
    <thead>
      <tr>
        <th>Start</th>
        <th>Einde</th>
        <th>Acties</th>
      </tr>
    </thead>
    <tbody>
      {{#each currentVerkozene.oudeMandaten as |mandaat|}}
        <tr>
          <td>
            {{wu-datepicker value=mandaat.start}}
          </td>
          <td>
            {{wu-datepicker value=mandaat.einde}}
          </td>
          <td>
            {{#wu-button class="button--alt button--small button--narrow" onClick=(action 'removeOldMandaat' mandaat)}}<i class="vi vi-cross"></i> Verwijder mandaat{{/wu-button}}
          </td>
        </tr>
      {{else}}
      <tr>
        <td colspan="3" class="u-align-center">
          <p>Er werden nog geen afgelopen mandaten toegevoegd.</p>
        </td>
      </tr>
      {{/each}}
      <tr>
        <td colspan="3" class="u-align-center">
          {{#wu-button class="button--alt button--small button--narrow" onClick=(action 'addOldMandaat' mandaat)}}<i class="vi vi-plus"></i> Voeg afgelopen mandaat toe{{/wu-button}}
        </td>
      </tr>
    </tbody>
  </table>
  <br>
  {{#wu-button class="button--narrow" onClick=(action 'closeEdit')}}Bewaar wijzigingen{{/wu-button}}
  {{#wu-button class="button--alt button--narrow" onClick=(action 'closeEdit')}}Verwerp wijzigingen (todo) {{/wu-button}}

{{else}}
    <table class="data-table data-table--lined data-table--zebra data-table--tight">
      <thead>
        <tr>
          <th>Rangorde</th>
          <th>Voornaam &amp; Familienaam</th>
          <th class="data-table--nested">
            <table class="data-table data-table--lined data-table--zebra data-table--tight">
              <thead>
                <tr>
                  <th colspan="2">Afgelopen mandaten</th>
                </tr>
                <tr>
                  <th style="max-width: 5rem;">Begin</th>
                  <th style="max-width: 5rem;">Einde</th>
                </tr>
              </thead>
            </table>
          </th>
          <th>Stemmen</th>
          <th>Lijst</th>
          <th>Acties</th>
        </tr>
      </thead>
      <tbody>
        {{#each verkozenen as |verkozene|}}
          {{#editor-plugins/verkozene-row verkozene=verkozene bestuursorgaan=bestuursorgaan as |row|}}
            <tr>
              <td>
                <strong>{{verkozene.rangorde}}</strong>
                {{#wu-link-button class="button--link button--tiny" isNarrow=true onClick=(action 'up' verkozene)}}
                  <i class="vi vi-burger-alt button__icon vi-u-180deg vi-u-xs"></i>
                {{/wu-link-button}}
                {{#wu-link-button class="button--link button--tiny" isNarrow=true onClick=(action 'down' verkozene)}}
                  <i class="vi vi-burger-alt button__icon vi-u-xs"></i>
                {{/wu-link-button}}
              </td>
              <td><strong>{{verkozene.persoon.gebruikteVoornaam}} {{verkozene.persoon.achternaam}}</strong></td>
              <td class="data-table--nested">
                <table>
                  <tbody>
                    {{#each verkozene.oudeMandaten as |mandaat|}}
                      <tr>
                        <td>
                          {{#each verkozene.oudeMandaten as |mandaat|}}
                            {{mandaat.start}}
                          {{/each}}
                        </td>
                        <td>
                          {{#each verkozene.oudeMandaten as |mandaat|}}
                            {{mandaat.einde}}
                          {{/each}}
                        </td>
                      </tr>
                    {{/each}}
                  </tbody>
                </table>
              </td>
              <td>{{row.resultaat.aantalNaamstemmen}}</td>
              <td>{{row.lijst.lijstnaam}}</td>
              <td>
                {{#wu-button-group class="u-spacer--tiny"}}
                  {{#wu-button size="small" isNarrow=true label="Bewerk" onClick=(action 'edit' verkozene)}}
                    <i class="vi vi-edit"></i> Bewerk afgelopen mandaten
                  {{/wu-button}}
                  {{#wu-button size="small" class="button--alt" isNarrow=true onClick=(action 'remove' verkozene)}}
                    <i class="vi vi-cross"></i> Verwijder raadslid
                  {{/wu-button}}
                {{/wu-button-group}}
              </td>
            </tr>
          {{/editor-plugins/verkozene-row}}
        {{else}}
          <td colspan="4">Er werden geen effectief verkozenen gevonden</td>
        {{/each}}
      </tbody>
    </table>
{{/if}}
<div class="output" style="display:none">
  <table class="data-table data-table--lined data-table--zebra data-table--tight" property="ext:mandatarisTabelInput">
    <thead>
      <tr>
        <th>Rang</th>
        <th>Voornaam &amp; Familienaam</th>
        <th>Begin mandaat</th>
        <th>Einde mandaat</th>
        <th>Stemmen</th>
        <th>Lijst</th>
      </tr>
    </thead>
    <tbody>
      {{#each verkozenen as |verkozene|}}
        {{#editor-plugins/verkozene-row verkozene=verkozene bestuursorgaan=bestuursorgaan as |row|}}
          <tr>
            <td>
              {{#with-rdfa-resource resource=verkozene as |ctx|}}
                {{ctx.prop p="rangorde"}}
              {{/with-rdfa-resource}}
            </td>
            <td>
              {{#with-rdfa-resource resource=verkozene as |ctx|}}
                {{#ctx.linked-resource p="persoon" as |model persoon|}}
                  {{persoon.prop resource=model p="gebruikteVoornaam"}} {{persoon.prop resource=model p="achternaam"}}
                {{/ctx.linked-resource}}
              {{/with-rdfa-resource}}
            </td>
            <td>
              {{#each verkozene.oudeMandaten as |mandaat|}}
                {{mandaat.start}}
              {{/each}}
            </td>
            <td>
              {{#each verkozene.oudeMandaten as |mandaat|}}
                {{mandaat.einde}}
              {{/each}}
            </td>
            <td>
              {{#if row.resultaat}}
                {{#with-rdfa-resource resource=verkozene as |ctx|}}
                  {{#ctx.linked-resource p="persoon" as |model persoon|}}
                    {{#ctx.linked-resource resource=persoon p="verkiezingsresultaten" as |model resultaat|}}
                      {{resultaat.prop resource=row.resultaat p="aantalNaamstemmen"}}
                    {{/ctx.linked-resource}}
                  {{/ctx.linked-resource}}
                {{/with-rdfa-resource}}
              {{/if}}
             </td>
             <td>
               {{#if row.lijst}}
                 {{#with-rdfa-resource resource=row.lijst as |ctx|}}
                   {{ctx.prop p="lijstnaam"}}
                   <span property="mandaat:heeftKandidaat" resource="{{verkozene.persoon.uri}}"></span>
                 {{/with-rdfa-resource}}
               {{/if}}
             </td>
          </tr>
        {{/editor-plugins/verkozene-row}}
      {{/each}}
    </tbody>
  </table>
</div>
